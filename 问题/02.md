//        String url = "http://testcrm.szmh.cn/web/cm/open/api/listAttractInvestment";
//        Object forObject = restTemplate.getForObject(url, Object.class);
//
//        System.out.println(forObject);
//        String s = JSONObject.toJSONString(forObject);
//        System.out.println(s);


//

//        Object result = forObject.get("result");
////        JSONObject jsonObject = JSONObject.parseObject(res);
////        Object result = jsonObject.get("result");
//        System.out.println(result);
//                .getJSONArray("result");

//        for (Object item : result) {
//            CardEntityDto cardEntityDto = JSONObject.toJavaObject((JSON) item, CardEntityDto.class);
//            System.out.println(cardEntityDto);
//
//        }




//        if(res.getCode() == 200){
//            Object result =  res.getResult();
//            String s = JSONObject.toJSONString(result);
//            CardEntityDto cardEntityDto = JSONObject.parseObject(s, CardEntityDto.class);
//            System.out.println(cardEntityDto);
//            List<CardEntityDto> cardEntityDtos = JSONObject.parseArray(s, CardEntityDto.class);
//            System.out.println(cardEntityDtos);


//            List<Map<String, Object>> result = (List<Map<String, Object>>) res.getResult();
//
//            for (Map<String, Object> stringObjectMap : result) {
//                System.out.println(stringObjectMap);
//            }
//            for (String s : result.keySet()) {
//
//                System.out.println(s);
//            }


//            ObjectMapper mapper = new ObjectMapper();
//////            Map<String, Object> result = (Map<String, Object>) ;
//////            JSONObject.parseObject()
//            List<CardEntityDto> pojos = mapper.convertValue(res.getResult(), new TypeReference<List<CardEntityDto>>() { });
////
//////            JSONObject.parseObject(result, List<CardEntityDto>)
////
//            System.out.println(pojos);

//        }

https://citymarktest.oss-cn-shenzhen.aliyuncs.com/temp/屏幕快照2023-02-24下午7.19.22_1677379798488.png


# 问题
function (config: any) {
    config.headers["X-Requested-With"] = "XMLHttpRequest";
    config.headers["Request-Start"] = new Date().getTime();
    config.headers["Accept-Language"] = getLocaleLang();
    const token = getToken();
    if (token && config.url !== "/auth/oauth/token") {
      config.headers["Authorization"] = "Bearer " + token;
    }
    if (config.method?.toUpperCase() === "GET") {
      config.params = { ...config.params, _t: new Date().getTime() };
    }
    if (Object.values(config.headers).includes("application/x-www-form-urlencoded")) {
      config.data = qs.stringify(config.data);
    }
    return config;
  },
# 问题2
```java
  @GetMapping("page")
  @GetMapping("page")
    @ApiOperation("分页")
    @ApiImplicitParams({
        @ApiImplicitParam(name = Constant.PAGE, value = "当前页码，从1开始", paramType = "query", required = true, dataType="int") ,
        @ApiImplicitParam(name = Constant.LIMIT, value = "每页显示记录数", paramType = "query",required = true, dataType="int") ,
        @ApiImplicitParam(name = Constant.ORDER_FIELD, value = "排序字段", paramType = "query", dataType="String") ,
        @ApiImplicitParam(name = Constant.ORDER, value = "排序方式，可选值(asc、desc)", paramType = "query", dataType="String") ,
        @ApiImplicitParam(name = "status", value = "状态  0：失败    1：成功    2：账号已锁定", paramType = "query", dataType="int"),
        @ApiImplicitParam(name = "creatorName", value = "用户名", paramType = "query", dataType="String")
    })
    @PreAuthorize("hasAuthority('sys:log:login')")
    public Result<PageData<SysLogLoginDTO>> page(@ApiIgnore @RequestParam Map<String, Object> params){
    
    ```

    WebMvcConfigurer

    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(authorizationInterceptor).addPathPatterns("/**");
    }

    @Override
    public void addArgumentResolvers(List<HandlerMethodArgumentResolver> argumentResolvers) {
        argumentResolvers.add(loginUserHandlerMethodArgumentResolver);
    }
filter
    OncePerRequestFilter
    batis
listener
侦听特定的子类事件
    ApplicationListener
# 过滤器和拦截器
过滤器（Filter） ：可以拿到原始的http请求，但是拿不到你请求的控制器和请求控制器中的方法的信息。

拦截器（Interceptor）：可以拿到你请求的控制器和方法，却拿不到请求方法的参数。

切片（Aspect）: 可以拿到方法的参数，但是却拿不到http请求和响应的对象
应用场景
拦截器是在DispatcherServlet这个servlet中执行的，因此所有的请求最先进入Filter，最后离开Filter。其顺序如下。

Filter->Interceptor.preHandle->Handler->Interceptor.postHandle->Interceptor.afterCompletion->Filter
# 拦截器应用场景
拦截器本质上是面向切面编程（AOP），符合横切关注点的功能都可以放在拦截器中来实现，主要的应用场景包括：

登录验证，判断用户是否登录。
权限验证，判断用户是否有权限访问资源，如校验token
日志记录，记录请求操作日志（用户ip，访问时间等），以便统计请求访问量。
处理cookie、本地化、国际化、主题等。
性能监控，监控请求处理时长等。
通用行为：读取cookie得到用户信息并将用户对象放入请求，从而方便后续流程使用，还有如提取Locale、Theme信息等，只要是多个处理器都需要的即可使用拦截器实现）
过滤器应用场景
1）过滤敏感词汇（防止sql注入）
2）设置字符编码
3）URL级别的权限访问控制
4）压缩响应信息