FROM:指令初始化一个新的构建阶段，并为后续指令设置基本映像;
RUN:将在当前图像之上的新层中执行任何命令并提交结果。最终提交的图像将用于Dockerfile的下一步;
- RUN <命令> 
- RUN ["executable"， "param1"， "param2"] 
例如：必须时双引号["/bin/bash", "-c", "echo hello"]
CMD指令有三种形式:
CMD["可执行文件"，"param1"，"param2"]
CMD ["param1"，"param2"](作为ENTRYPOINT的默认参数)
CMD命令param1 param2 (shell形式) 
Dockerfile中只能有一条CMD指令。如果您列出了多个CMD，则只有最后一个CMD将生效
CMD的`主要目的是为正在执行的容器提供默认值`。这些默认值可以包括可执行文件，也可以省略可执行文件，在这种情况下，还必须指定ENTRYPOINT指令。
如果CMD被用来为ENTRYPOINT指令提供默认参数，那么CMD和ENTRYPOINT指令都应该用JSON数组格式指定。

LABEL指令向映像添加元数据，例如LABEL example="foo-$ENV_VAR"，单引号将接受字符串，而不解包变量的值。允许设置你需要的任何元数据，并且可以很容易地查看，例如使用docker inspect
MAINTAINER指令设置生成图像的Author字段。

EXPOSE指令通知Docker容器在运行时监听`指定`的网络端口。您可以指定端口侦听TCP还是UDP，如果未指定协议，则默认为TCP。EXPOSE指令实际上并`不发布`端口,docker run -p 发布端口，docker network命令支持为容器之间的通信创建网络，而不需要公开或发布特定的端口，因为连接到网络的容器可以通过任何端口相互通信；

ENV：
- 环境变量持久性；
- 可以只在构建阶段有效，RUN DEBIAN_FRONTEND=noninteractive apt-get update && apt-get install -y ...

ADD指令
从<src>复制新文件、目录或远程文件url，并将它们添加到镜像文件系统的路径<dest>。；相对于构建上下文的源
- ADD test.txt relativeDir/
- ADD test.txt /absoluteDir/

COPY指令
从<src>复制新文件或目录，并将它们添加到容器路径<dest>的文件系统中。可以含通配符,Go的文件路径;

CMD和ENTRYPOINT指令都定义了运行容器时执行的命令
如果CMD是从基本映像定义的，设置ENTRYPOINT将会将CMD重置为空值。在这种情况下，必须在当前图像中定义CMD以具有值
WORKDIR指令
为Dockerfile中的RUN、CMD、ENTRYPOINT、COPY和ADD指令设置工作目录。如果WORKDIR不存在，即使在后续的Dockerfile指令中没有使用它，它也会被创建。 WORKDIR指令可以在Dockerfile中多次使用。如果提供了相对路径，它将相对于之前的WORKDIR指令的路径
ARG
FROM ubuntu
ARG CONT_IMG_VER
ENV CONT_IMG_VER=v1.0.0
RUN echo $CONT_IMG_VER
docker build --build-arg CONT_IMG_VER=v2.0.1 .

VOLUME
VOLUME ["/data"]
创建容器时，会在本地主机自动创建一个文件与容器中的/data建立挂载链接；

练习
vim Dockerfile

// 修改镜像名
docker tag beffdfdf 自定义镜像名

CMD ["curl", "-s", "http://ipinfo.io/ip"]

docker run xx 等价 docker run xx curl -s http://ipinfo.io/ip

INTEYPOINT ["curl", "-s", "http://ipinfo.io/ip"]

docker run xx 等价 docker run xx curl -s http://ipinfo.io/ip

docker run xx I 等价 docker run xx curl -s http://ipinfo.io/ip I

