Redis 持久化
Redis 如何将数据写入磁盘（仅附加文件、快照等）
# RDB
- 指定间隔的时间时生成点时间快照；
RDB的优势 
RDB是Redis数据的一个非常紧凑的单文件时间点表示。RDB文件非常适合用于备份。例如，您可能希望在最近的24小时内每小时存档一次RDB文件，并保存30天内每天的RDB快照。这允许您在灾难发生时轻松地恢复数据集的不同版本。 
RDB非常适合用于灾难恢复，它是一个单一的压缩文件，可以传输到远端的数据中心，或到Amazon S3(可能是加密的)。 
RDB最大限度地提高了Redis的性能，因为Redis父进程需要做的唯一工作就是创建一个子进程来完成剩下的所有工作。父进程永远不会执行磁盘I/O或类似的操作。 
与AOF相比，RDB允许大数据集更快的重启。 
在副本上，RDB支持重启和故障转移后的部分重新同步。
RDB缺点 
如果你需要在Redis停止工作(比如停电)的情况下最小化数据丢失的机会，那么RDB就不是一个好选择。
# AOF
Redis 7.0.0, Redis使用了多部分AOF机制，原始的单个AOF文件被分为基本文件(最多一个)和增量文件(可能不止一个)；
所有这些文件都放在一个单独的目录中，并由一个清单文件跟踪。
当Redis继续追加到旧文件时，一个全新的文件会产生，一旦第二个文件准备好，Redis会切换两个文件并开始追加到新文件。

优势：
即使断电也会自动保存，再次重启redis恢复。
AOF缺点 
对于相同的数据集，AOF文件通常比等效的RDB文件大。
根据fsync策略的不同，AOF可能比RDB慢。
重写期间到达的所有写命令都被写入磁盘两次。


对比：
RDB不是很持久，AOF另一种完全持久的策略，
- 系统在操作时会追加记录到文件中；
- 
- 快照
- - SAVEorBGSAVE命令。
- 开启AOF持久化
- - 日志追加频率设置
- - - always
- - - everysec
- - - no
# AOF带来的问题
# AOF重写
# 触发重写的方式


# redis的应用场景
- 手机验证时效性
- 验证字符串失效性业务功能

网站的吞吐量 

# 缓存
- 本地缓存
- 分布式缓存
- 集群：将同一个服务的多个节点放在一起共同对系统提供服务的过程。
- 分布式： 有多个不同的服务集群共同对系统提供服务；

# mybatis的二级缓存和redis的实现分布式缓存
- <cache type="" />
- <cache-ref type=""/>.  关联缓存

# 缓存穿透
# 缓存雪崩

# 主从复制
# 哨兵机制搭建