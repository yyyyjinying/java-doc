# 数据库实例
一个数据库有多个数据实例
# 表空间
逻辑名称有多个数据文件（数据库文件dbf:物理存储空间）；
段、区、数据块、磁盘块
数据库文件dbf：有多个OS块
# 用户
mysql一个用户可以看到多个数据库；
orcale是一个数据库下有很多用户；用户下在建立表；
orcale是一个数据库下有多个表空间，用户存储的数据表放在表空间中；

> docker exec orcale bash
> sqlplus test/123456
> > sqlplus test/123456@123.45.6.43:1523/orcl
>
# dba数据库管理员
创建用户
> create user usertest
> identified by 123456
> default tablespace tablespacetest;
用户授权
> grant dba to usertest;

# 数据类型
字符型： 
char   2000  
varchar2  4000  
long 2G
数值型：
number（5） 存5位数
number(5,2) 存5位小数2位 999.99
日期型：
DATA
timestamp
二进制型：
clob 4G
Blob 图像、声音、视频 4G

# 常见错误
## invalid character ->  `dep_mp`
INSERT INTO `dep_mp`(user_id,name) values(1000, 'zzz');
## column not allowed here ->  “”
INSERT INTO `dep_mp`(user_id,name) values(1000, “zzz”);
##  missing SELECT keyword  -> 'user_id'
INSERT INTO dep_mp('user_id',name) values(1000, 'zzz');
## column not allowed here -> "bbb"
insert into dep_mp values(1003,"bbb");

# and的优先级比or大

# 伪列：rowid, rownum
select rowid, t.* from DEP_MP t;
select ROWNUM, t.* from DEP_MP t;
# where子查询
单行子查询
多行子查询（in）

# from子句的子查询
# select子查询

# 分页
oracle的分页和sql1999 oracle语句
# 单行函数

oracle严格遵循标准sql

# 伪表 dual
select LENGTH('aaaa') from dual;
select 'aa'||'bb'||'cc' from dual;
四舍五入
round(112.345,2)
数字截取
trunc(123.45,2)
取模函数
mod(10,3)
select LENGTH('aaaa') from dual;
select 'aa'||'bb'||'cc' from dual;

select LAST_DAY(SYSDATE) from dual;
select TRUNC(SYSDATE, 'dd') from dual;

select '100'+1 from dual;
select '100'||1 from dual;

# 空值处理函数
nvl(null, 999)
decode
case when then else end

# 行列转换

# 分析函数

# 集合运算


# oracle序列和mysql的子增ID
create sequence test_seq;

select test_seq.NEXTval from dual;
select test_seq.currval from dual;

# 同义词
create SYNONYM bb for DEP_MP;
select * from bb;

# 超级管理员
select * from baby.bb;
私有同义词和公有同义词

# 创建索引；


Oracle 给表起别名时，直接在表名的后面空格别名就可以，不需要AS
Oracle中没有 if exists(...)的解决方法

# 查询表结构
DESC DEP_BRAND;

# oracle数据库对表名字段名大小写敏感；
表名必须大写；

# 字符串定义类型选择：
char适用于长度比较固定的，一般不含中文的情况；
varchar/varchar2适用于长度不固定的，一般不含中文的情况；
大多数情况下，ORACLE中的国家字符集是默认的，以下结论成立；
如果要省存储空间，建表时，字段内容里如果中文占了大多数，就用nvarchar2类型；如果内容是英文和数字为主的字符串，就用varchar2类型；

# mybatis使用序列
```sql
-- 首先创建序列
CREATE SEQUENCE OR_SEQUENCE_ONE
START WITH 10;
```
`序列名为： OR_SEQUENCE_ONE;`
`type = IdType.INPUT`
```java
@Data
@TableName("ums_admin")
@ApiModel(value="Admin对象", description="后台用户表")
@KeySequence(value="OR_SEQUENCE_ONE",clazz=Long.class)
public class Admin implements Serializable {

    private static final long serialVersionUID = 1;

    @TableId(value = "id",type = IdType.INPUT)
    private Long id;
```

# 视图
基表： 修改视图，基表中的数据也会变化；
```sql
create view view_address2 as select * from address weher areaid=2
with check option;

update view_address2 set name="aa" where id=4;
-- 只读视图
create or replace view view_oner as
select * from t_owners where ownertype=2
with read only;

-- 创建一个可能不存在的表
create force view view_test as
select * from t_test;
```
键保留表
聚合统计的视图不能修改

# 物化视图和视图的区别
物化视图是查单表，查询效率更高，但占用更多的空间；
视图是多表关联查询；





