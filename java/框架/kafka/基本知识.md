# 概念和术语
事件：从概念上讲，事件具有键、值、时间戳和可选的元数据标头;
生产者：是那些向Kafka发布(写入)事件的客户端应用程序
消费者：是那些订阅(读取和处理)这些事件的客户端应用程序

事件被组织起来并持久地存储在主题中；
Kafka的性能与数据大小有关，因此长时间存储数据是完全没问题的。
# 伸缩性
主题是分区的，这意味着一个主题分布在不同Kafka代理上的许多“桶”上。数据的这种分布式布局对于可伸缩性非常重要，因为它允许客户端应用程序同时从多个代理（brokers）读取和向多个代理写入数据。当一个新事件发布到一个主题时，它实际上被追加到该主题的一个分区（partitions）。具有`相同事件键的事件`(例如，客户或车辆ID)被写入`同一个分区`，Kafka保证给定主题分区的任何消费者总是以与写入事件完全相同的顺序读取该分区的事件。所以两个生产者都可以写入同一个分区；
# 容错性和高可用性
为了使您的数据具有`容错性和高可用性`，每个主题都可以复制，甚至可以跨地理区域或数据中心复制，以便总是有多个代理拥有数据的副本，以防出现问题，您希望对代理进行维护等等。常见的生产设置是复制因子为3，也就是说，您的数据总是有三个副本。这种复制在主题分区级别上执行。

# 生产者
允许应用程序向Kafka集群中的主题发送数据流。将数据发布到topic中，broker接收到生产者发送的数据，存储到partition中，生产者也可以指定partition存储；
同步发送和异步发送
可以自定义序列化器（serializer）和自定义分区器（Partitioner）
生产者拦截器可以自定义
ack的配置
retries重试配置
batch.size配置
max.request.size配置
```java
Properties props = new Properties();
// props.put(a,b) 生产者Producer Configs相关配置
new KafkaProducer<String, String>(props)
new ProducerRecord<String, String>(topic, s);
producer.send(record); // future和异步接受
```
# 消费者
允许应用程序从Kafka集群的主题中读取数据流。从broker中读取数据，可以消费多个topic中的数据；
消费组和消费者的概念；
消费端的反序列化器；
broker地址清单；
消费组（必须设置）
客户端id设置
订阅主题和分区
订阅主题可以使用集合和正则匹配多个主题

位移提交
- 重复消费
- 消息丢失
- 自动提交
- 同步提交
- 异步提交

指定位移消费
在均衡监听器
消费者拦截器
# topic
一个类别属性，就像一张表的表名；
# partition
topic分割成一个或多个partition中，每个topic至少有一个partition，每个partition中的数据至少使用多个segment文件存储。每个partition中的数据是有序的，多个partition无法保证顺序性，只能是一个partition才能严格保证消息的消费顺序；
partition offset : 指明了消息的起始位置；
# Replicas of partition
副本是一个分区的备份，副本不会被消费者消费，副本只是防止数据丢失。消费者从不从follower中的partition中消费，只从leader中的partition中消费。副本之间是一主多从关系；
# broker
kafka集群有多个服务器，服务器的节点称为broker；broker存储topic的数据；topic有N个partition,就对应N+M个broker，如果broker少于N个，就会导致kafka集群的数据不均衡；

分区
副本机制
leader选举
分区重新分配
修改副本因子
分区分配策略

# ISR
# OSR
# HW
# LEO
# Streams
允许将数据流从输入主题转换为输出主题
# CONFIGURATION
Kafka使用属性文件格式的键值对进行配置。这些值可以从文件中提供，也可以通过编程方式提供。

# zookeeper
负责管理和协调broker



docker run -p 8088:8080 \
    --name kafka-ui \
    -e KAFKA_CLUSTERS_0_NAME=kafka9092 \
    -e KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS=localhost:9092 \
    -e KAFKA_CLUSTERS_1_NAME=kafka9093 \
    -e KAFKA_CLUSTERS_1_BOOTSTRAPSERVERS=localhost:9093 \
    -e TZ=Asia/Shanghai \
    -e LANG=C.UTF-8 \
    -d provectuslabs/kafka-ui:latest