> docker-compose up -d
#进入容器：env LANG=C.UTF-8 避免容器中显示中文乱码
> docker exec -it mysql-master env LANG=C.UTF-8 /bin/bash
#进入容器内的mysql命令行
> mysql -h 192.168.1.3  -P 3307 -u root -p
123456
#修改默认密码校验方式
> ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';

# 主机中创建slave用户：
```mysql
-- 创建slave用户
CREATE USER 'atguigu_slave'@'%';
-- 设置密码
ALTER USER 'atguigu_slave'@'%' IDENTIFIED WITH mysql_native_password BY '123456';
-- 授予复制权限
GRANT REPLICATION SLAVE ON *.* TO 'atguigu_slave'@'%';
-- 刷新权限
FLUSH PRIVILEGES;
```
# 主机中查询master状态：
```msyql
-- 执行完此步骤后`不要再操作主服务器MYSQL`，防止主服务器状态值变化
SHOW MASTER STATUS
binlog.000002 |     1349
| binlog.000001 |      157
```
# 配置slave1
#进入容器：env LANG=C.UTF-8 避免容器中显示中文乱码
> docker exec -it mysql-slave1 env LANG=C.UTF-8 /bin/bash
#进入容器内的mysql命令行
> mysql -h 192.168.1.3  -P 3308 -u root -p
123456
#修改默认密码校验方式
> ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';
# 在从机上配置主从关系：
CHANGE MASTER TO MASTER_HOST='192.168.1.3', 
MASTER_USER='atguigu_slave',MASTER_PASSWORD='123456', MASTER_PORT=3307,
MASTER_LOG_FILE='binlog.000001',MASTER_LOG_POS=157;
# 查看从服务器状态
START SLAVE;
-- 查看状态（不需要分号）
SHOW SLAVE STATUS\G
# 配置slave2
#进入容器：env LANG=C.UTF-8 避免容器中显示中文乱码
> docker exec -it mysql-slave2 env LANG=C.UTF-8 /bin/bash
#进入容器内的mysql命令行
> mysql -h 192.168.1.3  -P 3309 -u root -p
123456
#修改默认密码校验方式
> ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';
# 在从机上配置主从关系：
CHANGE MASTER TO MASTER_HOST='192.168.1.3', 
MASTER_USER='atguigu_slave',MASTER_PASSWORD='123456', MASTER_PORT=3307,
MASTER_LOG_FILE='binlog.000001',MASTER_LOG_POS=157;
# 查看从服务器状态
START SLAVE;
Stop slave;
-- 查看状态（不需要分号）
SHOW SLAVE STATUS\G
-- 在从机上执行。功能说明：停止I/O 线程和SQL线程的操作。
stop slave; 

-- 在从机上执行。功能说明：用于删除SLAVE数据库的relaylog日志文件，并重新启用新的relaylog文件。
reset slave;

-- 在主机上执行。功能说明：删除所有的binglog日志文件，并将日志索引文件清空，重新开始所有新的日志文件。
-- 用于第一次进行搭建主从库时，进行主库binlog初始化工作；
reset master;
